<html>
  <head>
    <style>
      #note_q {
        background: yellow;
        display: inline;
      }
    </style>
    <script>
        function verifyNoteSelection() {
          var fifths_key = {'C' : 'G', 'G' : 'D', 'D': 'A', 'A' : 'E', 'E' : 'B', 'B' : 'F#/Gb', 'F#/Gb' : 'C#/Db', 'C#/Db' : 'G#/Ab', 'G#/Ab' : 'D#/Eb', 'D#/Eb' : 'A#/Bb', 'A#/Bb' : 'F', 'F' : 'C'};
          var note_question = document.getElementById('note_q').innerHTML;
          var note_selection = document.getElementById('note_selection').value;

          var answer_status_div = document.getElementById('answer_status');
          if(note_selection == fifths_key[note_question]) {
            answer_status_div.innerHTML = 'Correct!';
          }
          else {
            answer_status_div.innerHTML = 'Incorrect.';
          }
          answer_status_div.innerHTML += '<button type="button" onclick="nextQuestion()">next question</button>';
        }
        function nextQuestion() {
          var note_options = ['A', 'A#/Bb', 'B', 'C', 'C#/Db', 'D', 'D#/Eb', 'E', 'F', 'F#/Gb', 'G', 'G#/Ab'];
          var random_note = note_options[Math.floor(Math.random()*note_options.length)];
          
          document.getElementById('note_q').innerHTML = random_note;
          clearAnswerStatus();
        }
        function clearAnswerStatus() {
          document.getElementById('answer_status').innerHTML = '...';
        }
    </script>
  </head>
  <body>
    <h3>mtheory quiz v0.1</h3>
    <label for='quiz_type'>topic:</label>
    <select id='quiz_type'>
      <option value='fifths'>fifths</option>
      <option value='rel_major'>relative major</option>
      <option value='rel_minor'>relative minor</option>
    </select>
    <hr>
    <table>
      <tr>
        <td>What's the 5th of <div id='note_q'>A</div>?</td>
      </tr>
      <tr>
        <td>
          <select onchange='clearAnswerStatus()' id='note_selection'>
            <option value='A'>A</option>
            <option value='A#/Bb'>A#/Bb</option>
            <option value='B'>B</option>
            <option value='C'>C</option>
            <option value='C#/Db'>C#/Db</option>
            <option value='D'>D</option>
            <option value='D#/Eb'>D#/Eb</option>
            <option value='E'>E</option>
            <option value='F'>F</option>
            <option value='F#/Gb'>F#/Gb</option>
            <option value='G'>G</option>
            <option value='G#/Ab'>G#/Ab</option>
          </select>
          <button type='button' onClick='verifyNoteSelection()'>submit</button>
        </td>
      </tr>
      <tr><td><div id='answer_status'>...</div></td></tr>
    </table>
  </body>
</html>
